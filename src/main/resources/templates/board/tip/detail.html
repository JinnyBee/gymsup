<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layouts/layout}">
<body>
<div layout:fragment="content">
    <main id="main">
        <!-- ======= Search Results ======= -->
        <section id="search-result" class="search-result">
            <div class="container">
                <div class="row">
                    <div class="col-md-1"></div>
                    <div class="col-md-9"> <!-- 작업공간 -->
                        <div class="container mt-3">
                            <div class="row" style="border-bottom: 2px solid black">
                                <div class="col-lg-12"><h2>팁 게시판</h2></div>
                            </div>
                            <div class="row mt-3 mb-2">
                                <div class="col-lg-12">
                                    <p style="font-size: 26px; margin-bottom: 0px;" th:text="${boardDTO.title}">제목</p></div>
                            </div>
                            <div class="row mb-3 text-start" style="border-bottom: 1px solid black; border-top: 1px solid black; height: 45px; background-color: #f2f2f2">
                                <div class="col-lg-5 mt-2">
                                    <div style="display: inline-block" th:text="'닉네임 : ' + ${boardDTO.userNickname}"></div>
                                </div>
                                <div class="col-lg-2 mt-2"></div>
                                <div class="col-lg-3 mt-2 text-end">
                                    <div style="display: inline-block" th:text="'날짜 : ' + ${#temporals.format(boardDTO.regDate, 'yyyy-MM-dd')}"></div>
                                </div>
                                <div class="col-lg-2 mt-2 text-end">
                                    <div style="display: inline-block" th:text="'조회수 : ' + ${boardDTO.viewCnt}"></div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12" th:each="data:${boardDTO.imgFileList}">
                                    <p th:text="${data}"></p>
                                    <img th:src="|/images/@{${data}}|" alt="상품 이미지">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12" th:text="${boardDTO.content}" style="height: auto; min-height: 500px">
                                    내용
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-lg-10 text-end" style="padding-right: 0px;">
                                    <form action="/bookmark_register" method="post">
                                        <input type="hidden" th:value="${boardDTO.id}" name="boardId">
                                        <input type="hidden" name="categoryType" value="BTYPE_TIP">
                                        <button type="submit" class="btn btn-outline-dark" style="width: 120px; height: 50px; display: inline-block">
                                            <img src="/assets/img/bookmark_off.png" alt="" width="25" height="20">
                                            북마크
                                        </button>
                                    </form>
                                    <!--<form action="/bookmark_remove" method="post">
                                        <input type="hidden" th:value="${boardDTO.id}" name="boardId">
                                        <input type="hidden" name="categoryType" value="BTYPE_TIP">
                                        <button type="submit" class="btn btn-outline-dark" style="width: 120px; height: 50px; display: inline-block">
                                            <img src="/assets/img/bookmark_off.png" alt="" width="25" height="20">
                                            북마크
                                        </button>
                                    </form>-->


                                </div>
                                <div class="col-lg-2 text-end">
                                    <button type="button" class="btn btn-outline-dark rounded-pill" style="width: 110px; height:50px; display: inline-block">
                                        <img src="/assets/img/suggestion.png" alt="" width="25" height="20">
                                        추천
                                    </button>
                                </div>
                            </div>
                            <div class="row" style="border-top: 1px solid black; height: 100px;">
                                <div class="col-lg-4 mt-2"></div>
                                <div class="col-lg-4 mt-2"></div>
                                <div class="col-lg-4 mt-2" style="text-align: right">
                                    <button class="btn btn-outline-dark" type="button" th:onclick="|location.href='@{/board_tip_modify(id=${boardDTO.id})}'|" th:unless="${boardDTO.userNickname}">
                                        수정
                                    </button>

                                    <button class="btn btn-outline-danger" type="button" th:onclick="|location.href='@{/board_tip_remove(id=${boardDTO.id})}'|" th:unless="${boardDTO.userNickname}">
                                        삭제
                                    </button>
                                    <button class="btn btn-outline-primary" type="button" th:onclick="|location.href='@{/board_tip_list}'|">
                                        목록으로
                                    </button>
                                </div>
                            </div>
                            <!-- 댓글 작성 -->
                            <div class="row">
                                <div class="col-lg-4 mt-2">댓글 작성</div>
                                <div class="col-lg-4 mt-2"></div>
                                <div class="col-lg-4 mt-2"></div>
                            </div>

                            <div class="row mt-1">
                                <form th:action="@{/comment_register}" method="post">

                                    <div class="col-lg-11" style="float: left">
                                        <textarea class="form-control" name="comment" id="comment" rows="3" style="resize: none"></textarea>
                                    </div>
                                    <div class="col-lg-1" style="float: right">
                                        <button type="submit" class="btn btn-dark" style="float: right; height: 86px">등록</button>
                                    </div>
                                    <input type="hidden" name="boardId" th:value="${boardDTO.id}">
                                    <input type="hidden" name="userId" value="42">
                                    <input type="hidden" name="goodCnt" value="0">
                                    <input type="hidden" name="categoryType" th:value="${boardDTO.categoryType.name()}">
                                </form>
                            </div>

                            <div class="row mt-5" style="border-bottom: 2px solid black;">
                                <div  class="col-lg-12 mb-2">댓글(0)</div>
                            </div>

                            <!--댓글 목록 시작-->
                            <div style="border-bottom: 1px solid black;" th:each="data:${commentDTOS}">
                                <div class="row mt-2">
                                    <div class="col-lg-12 mb-2">
                                        <span class="text-left" th:text="${data.userNickname}"></span>
                                        &nbsp;<span class="text-left" style="font-size: 14px; color: #6c757d" th:text="${#temporals.format(data.modDate, 'yyyy-MM-dd HH:mm')}"></span>
                                        <button class="btn btn-outline-dark btn-sm text-right" type="button"
                                                th:onclick="|location.href='@{/comment_modify(bid=${boardDTO.id}, id=${data.id})}'|" th:unless="${data.userNickname}">수정
                                        </button>
                                        <button class="btn btn-outline-danger btn-sm text-right" type="button"
                                                th:onclick="|location.href='@{/comment_remove(bid=${boardDTO.id}, id=${data.id})}'|" th:unless="${data.userNickname}">삭제
                                        </button>
                                        <div class="mt-3" th:text="${data.comment}"></div>
                                    </div>
                                </div>
                                <!-- 답글 등록 -->
                                <div>
                                    <button type="button" class="btn btn-outline-secondary btn-sm mb-2" onclick="replyBtn()">답글</button>
                                </div>
                                <form th:action="@{/reply_register}" method="post">
                                    <div style="display: none">
                                        <div class="row">
                                            <div class="col-lg-11" style="float: left">
                                                <div class="mb-3">
                                                    <lfabel for="reply"></lfabel>
                                                    <textarea class="form-control mt-2" id="reply" name="reply" rows="2" style=" resize: none"></textarea>
                                                    <!-- 답글 등록 시 필요한 값들을 hidden으로 설정 -->
                                                    <input type="hidden" name="commentId" th:value="${data.id}">
                                                    <input type="hidden" name="boardId" th:value="${boardDTO.id}">
                                                    <input type="hidden" name="userId" value="52">
                                                    <input type="hidden" name="goodCnt" value="0">
                                                    <input type="hidden" name="categoryType" th:value="${boardDTO.categoryType.name()}">
                                                </div>
                                            </div>
                                            <div class="col-lg-1" style="float: right; padding-left: 6px">
                                                <button type="submit" class="btn btn-dark mt-2" style="font-size: 12px; height: 62px">등록</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <!--답글 목록-->
                                <div th:each="replyDTO:${data.replyDTOList}" style="border-top: 1px solid black;">
                                    <div class="row">
                                        <div class="col-lg-1 d-flex justify-content-center align-items-center" style="font-size: 12px">
                                            └
                                        </div>
                                        <div class="col-lg-11 mt-2 mb-2">
                                            <!--답글 단 사람 닉네임-->
                                            <span class="text-left" th:text="${replyDTO.userNickname}"></span>
                                            <!-- 답글 시간-->
                                            &nbsp;<span class="text-left" style="font-size: 14px; color: #6c757d" th:text="${#temporals.format(replyDTO.modDate, 'yyyy-MM-dd HH:mm')}"></span>
                                            <!-- 답글 삭제 버튼 -->
                                            <button class="btn btn-outline-dark btn-sm text-right" type="button"
                                                    th:onclick="|location.href='@{/reply_modify(bid=${boardDTO.id}, id=${replyDTO.id})}'|" th:unless="${data.userNickname}">수정</button>
                                            <button class="btn btn-outline-danger btn-sm text-right" type="button"
                                                    th:onclick="|location.href='@{/reply_remove(bid=${boardDTO.id}, id=${replyDTO.id})}'|" th:unless="${data.userNickname}">삭제</button>
                                            <div class="mt-3" th:text="${replyDTO.reply}"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--댓글 끝-->
                    </div> <!-- End 작업공간 -->
                    <div class="col-md-2">
                        <div class="trending">
                            <ul class="trending-post">
                                <li><a th:href="@{/mybmi}"><h3>BMI 계산</h3></a></li>
                                <li><a th:href="@{/exercise_calorie_list}"><h3>운동 칼로리 계산</h3></a></li>
                                <li><a th:href="@{/food_calorie_list}"><h3>음식 칼로리 계산</h3></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section> <!-- End Search Result -->
    </main><!-- End #main -->
</div>
</body>
</html>